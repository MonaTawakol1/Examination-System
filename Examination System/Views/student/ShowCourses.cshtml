@model IEnumerable<Course>
@{
    ViewData["Title"] = "ShowCourses";
}

<h1>ShowCourses</h1>

<html>
<head>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.4.1/dist/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
</head>
<body>

    <table class="table">
        <thead>
            <tr>
                <th scope="col">Course Name</th>
                <th scope="col">Actions</th>
            </tr>
        </thead>


        <tbody>
            @foreach (var item in Model)
            {
                <tr>
                    <td scope="row">@item.CourseName</td>
                    <td>
                        Exam Start Date : @item.ExamStartDateTime
                        Exam End Date :  @item.ExamEndDateTime
                        

                        @{
                            DateTime now = DateTime.Now;
                            bool isExamTime = now >= item.ExamStartDateTime && now <= item.ExamEndDateTime;
                        }

                        @if (isExamTime)
                        {
                            <a asp-action="StartExam" asp-controller="student" asp-route-id="@item.CourseId" asp-route-Studentid="@ViewBag.stdid" class="btn btn-info">Start Exam</a>
                        }
                        else
                        {
                            <button class="btn btn-info" disabled>Start Exam</button>
                        }

                      
                    </td>
                </tr>
            }
        </tbody>
    </table>


</body>
</html>
